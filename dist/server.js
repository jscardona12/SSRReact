module.exports=function(e){function r(n){if(t[n])return t[n].exports;var o=t[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}var t={};return r.m=e,r.c=t,r.p="/",r(0)}([function(e,r,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var o=t(2),s=(n(o),t(7),t(3)),i=(n(s),t(4)),u=(n(i),t(9)),a=n(u),c=t(5),l=c(),d=(t(6),t(16)),f=t(14),p=t(12),m=t(10);l.use("/assets",c.static("assets")),l.use("/",a.default);var y=t(1),b=t(15),v=t(13)(b);m.connectToServer();var w=y.connection;w.on("error",console.error.bind(console,"connection error:")),w.once("openUri",function(){}),l.use(b({secret:"work hard",resave:!0,saveUninitialized:!1,store:new v({mongooseConnection:w})})),l.use(d("dev")),l.use(p.json()),l.use(p.urlencoded({extended:!1})),l.use(f()),l.use("/assets",c.static("assets")),l.use("/",a.default),l.use(function(e,r,t){var n=new Error("File Not Found");n.status=404,t(n)}),l.use(function(e,r,t,n){t.locals.message=e.message,t.locals.error="development"===r.app.get("env")?e:{},t.status(e.status||500),t.render("error")}),l.listen(8080),console.log("listening on port 8080")},function(e,r){e.exports=require("mongoose")},function(e,r){e.exports=require("react")},function(e,r,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function s(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r}function i(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)}Object.defineProperty(r,"__esModule",{value:!0});var u=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),a=t(2),c=n(a),l=t(17),d=n(l),f=function(e){function r(){return o(this,r),s(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return i(r,e),u(r,[{key:"render",value:function(){this.props.isMobile;return c.default.createElement("div",null,c.default.createElement("form",{action:"/",method:"post"},c.default.createElement("input",{type:"text",name:"logemail",placeholder:"E-mail",required:""}),c.default.createElement("input",{type:"password",name:"logpassword",placeholder:"Password",required:""}),c.default.createElement("div",{class:"tp"},c.default.createElement("input",{type:"submit",value:"LOGIN NOW"}))))}}]),r}(a.Component);r.default=f,f.propTypes={isMobile:d.default.bool.isRequired}},function(e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){var r=e.body,t=e.title,n=e.initialState;return"\n    <!DOCTYPE html>\n    <html>\n      <head>\n        <script>window.__APP_INITIAL_STATE__ = "+n+"</script>\n        <title>"+t+'</title>\n        <link rel="stylesheet" href="/assets/index.css" />\n      </head>\n      \n      <body>\n        <div id="root">'+r+'</div>\n      </body>\n      \n      <script src="/assets/bundle.js"></script>\n    </html>\n  '}},function(e,r){e.exports=require("express")},function(e,r){e.exports=require("path")},function(e,r){e.exports=require("react-dom/server")},function(e,r,t){"use strict";var n=t(1),o=t(11),s=new n.Schema({email:{type:String,unique:!0,required:!0,trim:!0},username:{type:String,unique:!0,required:!0,trim:!0},password:{type:String,required:!0},passwordConf:{type:String,required:!0}});s.statics.authenticate=function(e,r,t){i.findOne({email:e}).exec(function(e,n){if(e)return t(e);if(!n){var e=new Error("User not found.");return e.status=401,t(e)}o.compare(r,n.password,function(e,r){return r===!0?t(null,n):t()})})},s.pre("save",function(e){var r=this;o.hash(r.password,10,function(t,n){return t?e(t):(r.password=n,void e())})});var i=n.model("User",s);e.exports=i},function(e,r,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var o=t(2),s=n(o),i=t(7),u=t(3),a=n(u),c=t(4),l=n(c),d=t(5),f=d.Router(),p=t(8);t(6);f.get("/",function(e,r,t){var n=!0,o={isMobile:n},u=(0,i.renderToString)(s.default.createElement(a.default,o));r.send((0,l.default)({body:u,title:"Hello World from the server",initialState:JSON.stringify(o)}))}),f.post("/",function(e,r,t){if(e.body.password!==e.body.passwordConf){var n=new Error("Passwords do not match.");return n.status=400,r.send("passwords dont match"),t(n)}if(e.body.email&&e.body.username&&e.body.password&&e.body.passwordConf){var o={email:e.body.email,username:e.body.username,password:e.body.password,passwordConf:e.body.passwordConf};p.create(o,function(n,o){return n?t(n):(e.session.userId=o._id,r.redirect("/profile"))})}else{if(!e.body.logemail||!e.body.logpassword){var n=new Error("All fields required.");return n.status=400,t(n)}p.authenticate(e.body.logemail,e.body.logpassword,function(n,o){if(n||!o){var s=new Error("Wrong email or password.");return s.status=401,t(s)}return e.session.userId=o._id,r.redirect("/profile")})}}),f.get("/profile",function(e,r,t){p.findById(e.session.userId).exec(function(e,n){if(e)return t(e);if(null===n){var o=new Error("Not authorized! Go back!");return o.status=400,t(o)}return r.send("<h1>Name: </h1>"+n.username+"<h2>Mail: </h2>"+n.email+'<br><a type="button" href="/logout">Logout</a>')})}),f.get("/logout",function(e,r,t){e.session&&e.session.destroy(function(e){return e?t(e):r.redirect("/")})}),e.exports=f},function(e,r,t){"use strict";var n=t(1),o=process.env.MONGODB_URI;if(!o)throw new Error("env variable MONGODB_URI must be defined!");console.log(o),e.exports={connectToServer:function(){n.connect(o)}}},function(e,r){e.exports=require("bcrypt")},function(e,r){e.exports=require("body-parser")},function(e,r){e.exports=require("connect-mongo")},function(e,r){e.exports=require("cookie-parser")},function(e,r){e.exports=require("express-session")},function(e,r){e.exports=require("morgan")},function(e,r){e.exports=require("prop-types")}]);